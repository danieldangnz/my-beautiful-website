<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONTACT US</title>
    <link rel="stylesheet" type="text/css" href="CSS/styles.css" >
</head>

<body>
    <header class="centralize-vertical">
        <h1>My Beautiful Website</h1>
    </header>

    <nav class="centralize-vertical">
        <div>
            <div>
                <button>  <a href="index.html">HOME</a>            </button>
                <button>  <a href="about-us.html">ABOUT US</a>     </button>
                <button>  <a href="contact-us.html">CONTACT US</a> </button>
            </div>
        </div>
    </nav>

    <main>
        <h1>CONTACT US PAGE</h1>

        <!-- Contact Form -->
        <form id="contactForm">
          <input type="text" id="name" name="name" placeholder="Your Name" required> <br>
          <input type="email" id="email" name="email" placeholder="Your Email" required>  <br>
          <textarea id="message" name="message" placeholder="Your Message" required rows="5"></textarea>  <br>
          <button type="submit">Send Message</button>
        </form>
        <div id="formStatus"></div>
        
        
        <!-- Add this inside your <main> tag or wherever you want to display messages -->
        <h3>List of existing messages: </h3>
        <div id="messagesContainer"></div>

        <script src="JS/main.js" type="module"></script>
        <script src="JS/database.js" type="module"></script>
    
        <script type="module">
          // filepath: c:\Users\ddang\Desktop\2025-RESEARCHES\7-AI-pair programming or AI assistant Coding\w3-demo\index.html
          import { getMessageFromDB } from './JS/database.js';
          import { insertMessageToDB } from './JS/database.js';
    
          async function displayMessages() {
            const messages = await getMessageFromDB();
            const container = document.getElementById('messagesContainer');
            if (messages.length === 0) {
              container.innerHTML = '<p>No messages found.</p>';
              return;
            }
            container.innerHTML = messages.map(msg => `
              <div class="message">
                <strong>${msg.name || 'Anonymous'}:</strong>
                <span>${msg.email}</span>
                <span>${msg.message}</span>
                <em>${new Date(msg.created_at).toLocaleString()}</em>
              </div>
            `).join('');
          }
          // 
          displayMessages();


        // Handle form submission
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
          e.preventDefault();
          const name = document.getElementById('name').value.trim();
          const email = document.getElementById('email').value.trim();
          const message = document.getElementById('message').value.trim();
          const statusDiv = document.getElementById('formStatus');
    
          if (!name || !email || !message) {
            statusDiv.textContent = 'Please fill in all fields.';
            return;
          }
    
          const result = await insertMessageToDB(name, email, message);
          if (result) {
            statusDiv.textContent = 'Message sent successfully!';
            document.getElementById('contactForm').reset();
            displayMessages();
          } else {
            statusDiv.textContent = 'Error sending message. Please try again.';
          }
        });




            
        </script>
    
      
    </main>

    <footer class="centralize-vertical">
        <p>ITWD5.130: WEBSITE DEVELOPMENT <br>Created by Daniel Dang.</p>
    </footer>
</body>

</html>





